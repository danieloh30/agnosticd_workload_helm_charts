---
apiVersion: tackle.konveyor.io/v1alpha1
kind: Tackle
metadata:
  name: tackle
  labels:
    {{- include "mta.labels" . | nindent 4 }}
  annotations:
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
spec:
  feature_auth_required: {{ .Values.tackleInstance.featureAuthRequired }}
  hub_bucket_volume_size: {{ .Values.tackleInstance.hubBucketVolumeSize }}
  hub_database_volume_size: {{ .Values.tackleInstance.hubDatabaseVolumeSize }}
  keycloak_database_data_volume_size: {{ .Values.tackleInstance.keycloakDatabaseVolumeSize }}
  maven_data_volume_size: {{ .Values.tackleInstance.mavenDataVolumeSize }}
  pathfinder_database_data_volume_size: {{ .Values.tackleInstance.pathfinderDatabaseDataVolumeSize }}
{% if ocp4_workload_mta6_rwo_storage_class | length > 0 %}
  rwo_storage_class: {{ ocp4_workload_mta6_rwo_storage_class }}
{% endif %}
{% if ocp4_workload_mta6_rwx_storage_class | length > 0 %}
  rwx_storage_class: {{ ocp4_workload_mta6_rwx_storage_class }}
{% endif %}
{% if not ocp4_workload_mta6_rwx_supported %}
  rwx_supported: false
{% endif %}
